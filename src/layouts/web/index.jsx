import { Outlet } from 'react-router-dom';
import Header from './components/header';
import Sidebar from './components/sidebar';
import { useTheme } from '~/stores/app/hooks';
import useColorScheme from '~/hooks/use-color-scheme';
import { useEffect } from 'react';
import { useModals } from '~/stores/modal/hooks';
import Modals from '~/modals';

export default function WebLayout() {
  const modals = useModals();
  const theme = useTheme();
  const { colorScheme } = useColorScheme();

  useEffect(() => {
    if (theme === 'default') {
      document.body.className = colorScheme;
    } else {
      document.body.className = theme;
    }
  }, [theme, colorScheme]);

  console.log('modals', modals);

  return (
    <>
      {modals.length > 0 && <Modals />}
      <Header />
      <Sidebar />
      <main className='p-6 mt-14 flex-1 ml-[250px] dark:text-white'>
        <Outlet />
      </main>
    </>
  );
}
